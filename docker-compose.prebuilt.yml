# docker-compose 扩展配置文件
# 用于使用预构建的镜像（GitHub Actions 构建）
#
# 使用方法：
#   docker-compose -f docker-compose.yml -f docker-compose.prebuilt.yml up -d
#
# 前提条件：
# 1. 在 .env 文件中配置：
#    DOCKER_REGISTRY=docker.io
#    IMAGE_NAMESPACE=your-docker-username  # 你的 Docker Hub 用户名
#
# 2. 确保镜像已推送到 Docker Hub：
#    - <your-username>/ruoyi-backend:latest
#    - <your-username>/ruoyi-frontend:latest

services:
  backend:
    build: null  # 禁用本地构建
    image: ${DOCKER_REGISTRY:-docker.io}/${IMAGE_NAMESPACE}/ruoyi-backend:latest
    pull_policy: always  # 确保拉取最新镜像

  frontend:
    build: null  # 禁用本地构建
    image: ${DOCKER_REGISTRY:-docker.io}/${IMAGE_NAMESPACE}/ruoyi-frontend:latest
    pull_policy: always  # 确保拉取最新镜像
