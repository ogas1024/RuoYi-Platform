# Apifox 指南：问卷-门户

- baseURL: `http://localhost:8080`
- 请求头：`Authorization: Bearer {{token}}`

## 步骤 1：获取 token
- POST `/login`
- Body: `{ "username": "admin", "password": "admin123" }`
- 断言：`code == 200 && data.token 不为空`

## 步骤 2：查询问卷列表
- GET `/portal/survey/list?pageNum=1&pageSize=10`
- 断言：`status == 200`
- 说明：仅返回“已发布”问卷；返回字段包含 `pinned`（置顶）和 `submitted`（是否已填写）。

## 步骤 3：获取详情（含我的作答/投票结果）
- GET `/portal/survey/{id}`
- 断言：`status == 200 && data.items.length >= 1`
- 说明：仅“已发布”问卷可见。若当前时间已晚于 `deadline`，返回的单/多选题选项将包含 `voteCount` 字段，可用于结果柱状图展示。

## 步骤 4：提交答案
- POST `/portal/survey/{id}/submit`
- Body(JSON)：
```json
{
  "answers": [
    { "itemId": 11, "valueText": "我是……" },
    { "itemId": 12, "optionIds": [121] },
    { "itemId": 13, "optionIds": [131,132] }
  ]
}
```
- 断言：`status == 200`
- 常见失败：
  - 400 已过截止时间，无法提交
  - 400 必填题未填写
  - 404 问卷不存在或未发布

## 步骤 5：我填写的
- GET `/portal/survey/my?pageNum=1&pageSize=10`
- 断言：`status == 200`
