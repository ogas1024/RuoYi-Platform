# Apifox 指南 —— 失物招领（门户）

- baseURL: `http://localhost:8080`
- 环境变量建议：`base`、`token_user`
- 通用请求头：`Authorization: Bearer {{token_user}}`

## 前置：登录用户
- POST /login → Body: `{ "username":"user", "password":"123456" }`
- 断言：`code == 200`；提取 `data.token` → `token_user`

## 用例 1：浏览列表/详情
- 列表：GET /portal/lostfound/list?pageNum=1&pageSize=10&keyword=钥匙 → 断言 `code == 200`
- 详情：GET /portal/lostfound/{id} → 断言 `code == 200`

## 用例 2：发布 → 审核 → 查看（端到端）
1) 发布草稿
- POST /portal/lostfound
- Body：
```json
{ "type":"lost", "title":"钥匙丢失", "content":"黑色钥匙一串", "contactInfo":"手机:138****8888" }
```
- 断言：`code == 200`；提取 `data.id` → `rid`
2) 编辑完善（回到待审）
- PUT /portal/lostfound/{{rid}}
- Body：`{ "title":"钥匙丢失-有酬", "content":"黑色钥匙一串，丢于操场" }`
- 断言：`code == 200`
3) 管理端审核通过（由管理员在其集合中执行）
4) 门户查看详情/列表应可见且 `status==2`

## 用例 3：标记已解决
- PUT /portal/lostfound/{{rid}}/solve → `code == 200`

## 用例 4：我的列表
- GET /portal/lostfound/my/list?pageNum=1&pageSize=10 → `code == 200`

## 上传图片
- POST /portal/upload/oss（Form-Data）
- 字段：`scene=lostfound.image`、`file=@local.png`、可选 `publicUrl=true`
- 断言：`code == 200`；提取 `data.url` 用于图片 `url`

## 断言与失败
- 统一断言：`status == 200 && body.code == 200`
- 401 未登录；403 越权（非作者）；409 状态冲突（已解决不可编辑等）
