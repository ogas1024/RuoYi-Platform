# RuoYi 后台操作指南｜通知公告菜单与权限（含SQL模板）

更新时间：2025-10-19

## 一、目标
- 新增后台“通知公告”目录与菜单；绑定权限：`manage:notice:*`
- 读权限分配给：user/librarian/major_lead/staff/admin/super_admin（至少 list/get）
- 写权限（新增/编辑/删除/发布/置顶）只分配给：staff、admin、super_admin

## 二、后台可视化操作（小白友好）
1) 登录 RuoYi 后台 → 系统管理 → 菜单管理 → 新增（目录）
- 菜单类型：目录
- 菜单名称：通知公告
- 显示排序：1（可按需调整）
- 路由地址：/manage/notice
- 菜单图标：bell（或自选）
- 其他保持默认 → 保存

2) 在“通知公告”目录下 → 新增（菜单）
- 菜单类型：菜单
- 菜单名称：公告管理
- 路由地址：index（最终路径 /manage/notice/index）
- 组件路径：manage/notice/index
- 权限标识：manage:notice:list
- 其他保持默认 → 保存

3) 在“公告管理”菜单下 → 新增（按钮，重复以下5次）
- 新增：按钮名称“新增”，权限标识 `manage:notice:add`
- 修改：按钮名称“修改”，权限标识 `manage:notice:edit`
- 删除：按钮名称“删除”，权限标识 `manage:notice:remove`
- 发布/撤回：按钮名称“发布/撤回”，权限标识 `manage:notice:publish`
- 置顶：按钮名称“置顶”，权限标识 `manage:notice:pin`

4) 角色授权（系统管理 → 角色管理）
- user/librarian/major_lead：勾选目录与“公告管理”菜单（至少有 list），保留只读
- staff：在只读基础上勾选 add/edit/remove/publish/pin
- admin/super_admin：全选（或通过角色继承已具备）
- 注：变更菜单需重新登录生效；前端按钮需使用 v-hasPermi 对齐

校验要点
- 列表页按钮指令：
  - v-hasPermi=['manage:notice:list']
  - v-hasPermi=['manage:notice:add'] 等
- 后端注解需一致：`@PreAuthorize("@ss.hasPermi('manage:notice:xxx')")`


## 四、前端路由与页面映射
- 菜单“公告管理”的组件路径：`manage/notice/index` 已存在页面
- 门户只读页（需自行在前端路由里添加一个公开菜单或在门户区域添加入口）：`portal/notice/index`
（可选但建议）新增隐藏路由“公告编辑”用于从列表跳转：
- 菜单类型：菜单（隐藏）
- 菜单名称：公告编辑（隐藏）
- 路由地址：edit（最终路径 /manage/notice/edit）
- 组件路径：manage/notice/edit
- 显示：隐藏 = 是
